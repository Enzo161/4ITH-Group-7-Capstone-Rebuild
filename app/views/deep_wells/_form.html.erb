<%= form_with(model: [@client, deep_well], local: true) do |form| %>
  <% if deep_well.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(deep_well.errors.count, "error") %> prohibited this deep_well from being saved:</h2>
      <ul>
        <% deep_well.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>  

<!--Form Start-->
  <div class="row" style="text-transform: uppercase;">
    <!--Column 1-->
    <div class="col">
      <div class="field" style="">
        <strong><%= form.label "Deep Well Name:" %></strong>
        <%= form.text_field :deep_well_name, class:"form-control",autofocus:true %>
      </div>
      <div class="field">
        <strong><%= form.label "Client Name:" %> </strong>
        <%= form.text_field :clientName, class:"form-control" %>
      </div>
      <div class="field">
        <strong><%= form.label "Well Coordinates:" %></strong>
        <%= form.text_field :wellCoodinates, class:"form-control" %>
      </div>
      <div class="field">
        <strong><%= form.label "Name of Contractor:" %></strong>
        <%= form.text_field :contractor, class:"form-control" %>
      </div>
      <div class="field">
        <strong><%= form.label "Date of UTVI:" %></strong>
        <%= form.date_field :dateofUTVI , class:"form-control"%>
      </div>
    </div>

    <!--Column 2-->
    <div class="col">
      <div class="field">
        <strong><%= form.label "Date Granted:" %></strong>
        <%= form.date_field :dateGranted, class:"form-control" %>
      </div>
      <div class="field">
        <strong><%= form.label "Well Location:" %></strong>
        <%= form.text_field :wellLocation, class:"form-control" %>
      </div>
      <div class="field">
        <strong><%= form.label "Water Permit Number:" %></strong>
        <%= form.text_field :waterPermitNo, class:"form-control" %>
      </div>
      <div class="field">
        <strong><%= form.label "Total Depth:" %></strong>
        <%= form.text_field :depthTotal, class:"form-control" %>
      </div>    
      <div class="field">
        <strong><%= form.label "Reason:" %></strong>
        <%= form.text_field :reason , class:"form-control"%>
      </div>
    </div>
  </div>

<br>


<!-- Lithologic File Start-->
<% if @deep_well.log.attached? %>
  <table class="table table-hover table-bordered ">
    <tbody>
      <tr>
        <td> <strong> Lithologic File </strong></td>
        <td> <strong> Date Uploaded </strong></td>
        <td> <strong> Delete </strong></td>
      </tr>
      <tr>
        <td>
          <% if @deep_well.log.attached? %>
            <p>
              <%= link_to @deep_well.log.filename, @deep_well.log, html_options = { target: "_blank"} if @deep_well.log.attached? %>
            </p>
          <% else %>
            <p>
              <i> File unavailable </i>
            </p>
          <% end %>
        </td>
        <td>
          <% if @deep_well.log.attached? %>
            <p>
              <%= @deep_well.log.created_at %>
            </p>
          <% else %>
            <p>
              -
            </p>
          <% end %>
        </td>
        <td>
          <% if @deep_well.log.attached? %>
            <p>
              <%= link_to "Remove Attachment", purge_log_attachment_client_deep_well_path(@deep_well, deep_well.log.id), method: :delete, data: { confirm: 'Are you sure?' } %>
            </p>
          <% else %>
            <p>
              -
            </p>
          <% end %>
        </td>

      </tr>
    </tbody>
  </table>
<% else %>
  <strong><%= form.label "Upload Lithologic Log:" %></strong>
  <%= form.file_field :log, class:"form-control" %> 
<% end %> 
  <!-- Lithologic File End-->

<br>

  <!-- Asbuilt Files Start-->

  <table class="table table-hover table-bordered ">
    <thead>
        <tr>
          <th>  As-Built Design Files </th>
          <th>  Date Uploaded </th>
          <th>  Delete </th>
        </tr>
    </thead>
    <tbody>
        <% if !@deep_well.asbuilt.attached? %>
          <tr>
            <td> <i> File unavailable </i></td>
            <td> - </td>
            <td> - </td>
          </tr>
        <% else %>
        <%@deep_well.asbuilt.each do |asbuilt|%>
          <tr>
            <td> <%= link_to(asbuilt.filename, rails_blob_path(asbuilt),  target: '_blank') %></td>
            <td> <%= asbuilt.created_at %></td>
            <td> Remove Attachment
              <!--link_to 'Remove Attachment', purge_asbuilt_attachment_path(@deep_well, deep_well.asbuilt.id), method: :delete, data: { confirm: 'Are you sure?' } --> </td>
          </tr>
        <% end %>
        <% end %>
      </tbody>
  </table>
  <%= form.file_field :asbuilt, class:"form-control", multiple: true %>

  <!-- Asbuilt Files End--> <br>


  <!-- Deepwell Design Proposal Start-->

  <table class="table table-hover table-bordered ">
    <thead>
        <tr>
          <th>  Deepwell Design Proposal Files</th>
          <th>  Date Uploaded </th>
          <th>  Delete </th>
        </tr>
    </thead>
    <tbody>
        <% if !@deep_well.design.attached? %>
          <tr>
            <td> <i> File unavailable </i> </td>
            <td> - </td>
            <td> - </td>
          </tr>
        <% else %>
        <%@deep_well.design.each do |design|%>
          <tr>
            <td> <%= link_to(design.filename, rails_blob_path(design),  target: '_blank') %></td>
            <td> <%= design.created_at %> </td>
            <td> Remove Attachment </tr>
        <% end %>
        <% end %>
      </tbody>
  </table>
      <%= form.file_field :design, class:"form-control", multiple: true %>
  <!-- Deepwell Design Proposal End-->


  <div class="actions" style="float:right">
    <%= form.submit :Submit, class: 'btn btn-primary'%>
    <%= link_to "Back", :back, class: 'btn btn-light' %>
  </div>
  <% end %>

<!--Form End-->